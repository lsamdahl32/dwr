let tabbar=function(t,i){function e(t,e){1===$("#myForm").length&&$("input[name='SubmitRequest']").length>0&&(t=a(t)),$.post(i.ajaxHandler,t,function(t){""!==e?($(".tabContents_"+i.identifier).hide(),$("#"+e).html(t).show()):$("#"+i.tabBodyId).html(t),""!==i.refreshCallback&&window[i.refreshCallback](i.identifier,i.currentTab,i.currentTabID)})}function a(t){let e=!1;return"SubmitRequest"===this.name&&"altSearchCriteria"===this.value&&(e=!0),$("#myForm input, #myForm select, #myForm textarea").each(function(){e?t[this.name]=this.value:"SubmitRequest"===this.name&&"authlog"===this.value||"_in1"===this.name.substring(this.name.length-4)||"_in2"===this.name.substring(this.name.length-4)||"_so"===this.name.substring(this.name.length-3)||"subtotalBySort"===this.name?t[this.name]=this.value:"_sho"===this.name.substring(this.name.length-4)&&$(this).is(":checked")&&(t[this.name]=1)}),""!==i.linkField&&(t.linkField=i.linkField,t.linkID=i.linkID),t}return $(".tab_bar_buttons"+i.identifier).on("click",function(){if(!i.disabled){let t=this.id,a=$(this).attr("data-tabIdentifier"),n=$(this).attr("data-tabIndex"),r=$(this).attr("data-function"),s=$(this).attr("data-elementID"),b=$(this).attr("data-param0"),d=$(this).attr("data-param1");($(".tab_bar_buttons"+i.identifier).removeClass("tab_bar_buttons_active"),$("#"+t).addClass("tab_bar_buttons_active"),i.currentTabID=a,i.currentTab=n,$.post("/manageAjax.php",{process:"doSaveSessionVar",var:i.identifier+"_tab_selected",val:a}),i.useAjax)?e({tabbar_identifier:i.identifier,tab_show:!0,tab_selected:t,tab_identifier:a,tab_function:r,tab_param0:b,tab_param1:d},s):""!==s?($(".tabContents_"+i.identifier).hide(),$("#"+s).show(0,function(){"function"==typeof window[i.refreshCallback]&&window[i.refreshCallback](i.identifier,i.currentTab,i.currentTabID)})):doSubmitWithValues({tab_selected:t,tabbar_identifier:i.identifier},b)}}),$("#tab_bar_container"+i.identifier).on("click",".tab_bar_scroll"+i.identifier,function(){let t=$(".tab_bar_buttons_scroll"+i.identifier),e=$("#tab_bar_container"+i.identifier).width(),a=t.width(),n=t.css("margin-left"),r=Number(n.substring(0,n.indexOf("px")));"right"===$(this).attr("data-direction")?e-(a+r)<0&&(r-=154,t.css("margin-left",r.toString()+"px")):((r+=154)>0&&(r=0),t.css("margin-left",r.toString()+"px"))}),$(document).ready(function(){if(i.useAjax){let t=$("#"+i.currentTabID),a=i.currentTabID,n=t.attr("data-tabIdentifier"),r=t.attr("data-function"),s=t.attr("data-elementID"),b=t.attr("data-param0"),d=t.attr("data-param1");e({tabbar_identifier:i.identifier,tab_show:!0,tab_selected:a,tab_identifier:n,tab_function:r,tab_param0:b,tab_param1:d,...i.post},s)}}),{settings:i,refresh:function(){let t;t={tabbar_identifier:i.identifier,process:"refreshTabs"},1===$("#myForm").length&&$("input[name='SubmitRequest']").length>0&&(t=a(t)),$.post(i.ajaxHandler,t,function(t){$(".tab_bar_container"+i.identifier).html(t),function t(){let e=$(".tab_bar_buttons_scroll"+i.identifier),a=$("#tab_bar_container"+i.identifier).width(),n=e.width(),r=i.currentTab;if(n>a){$(".tab_bar_scroll"+i.identifier).show();let s=0,b=0,d=0;$(".tab_bar_buttons"+i.identifier).each(function(){if(!(d<r))return!1;s+$(this).width()>a-150?b-=$(this).width():s+=$(this).width(),d++}),e.css("margin-left",b.toString()+"px")}else $(".tab_bar_scroll"+i.identifier).hide(),e.css("margin-left","0px")}()})},setTab:function(t){""!==(t=t||"")&&$("#"+t).trigger("click")},getCurrentTab:function(){return i.currentTabID},disabled:function(t){i.disabled=t,t?$(".tab_bar_buttons"+i.identifier).addClass("tab_bar_buttons_disabled"):$(".tab_bar_buttons"+i.identifier).removeClass("tab_bar_buttons_disabled")}}};
